<div class="row">
  <div class="col-sm-8">
  <% if @section.enrollable_for? @user %>
    <% if @section.is_full? %>
      <%= link_to "Add to waiting list",
                  wait_list_course_section_path(@course, @section),
                  method: :post, class: 'btn btn-primary' %>
    <% else %>
      <%= link_to "Enroll", enroll_course_section_path(@course, @section),
                  method: :post, class: 'btn btn-primary' %>
    <% end %>
  <% elsif @user.enrolled?(section: @section) %>
    <%= link_to "Drop", drop_course_section_path(@course, @section),
                method: :delete, class: 'btn btn-primary' %>
  <% elsif @user.enrolled?(section: @section, scope: :waiting) %>
    <%= link_to "Stop waiting", drop_course_section_path(@course, @section),
                method: :delete, class: 'btn btn-primary' %>
  <% end %>
  <% if can? :update, @section %>
    <%= link_to edit_course_section_path(@course, @section),
                class: 'btn btn-default' do %>
      <span class="glyphicon glyphicon-pencil"></span> Edit
    <% end %>
  <% end %>
  <% if can? :destroy, @section %>
    <%= link_to [@course, @section], method: :delete, class: 'btn btn-default',
                :data => { confirm: 'Are you sure?' } do %>
      <span class="glyphicon glyphicon-trash"></span> Delete
    <% end %>
  <% end %>
  </div>
  <% if can? :enroll_user, @section %>
  <div class="col-sm-4 text-right">
    <%= form_tag enroll_user_course_section_path, :role => 'form' do %>
      <div class="form-group">
        <div class="input-group">
          <%= text_field_tag :username, nil, placeholder: 'Username or eID',
                             class: 'form-control' %>
          <div class="input-group-btn">
            <button class="btn btn-default" type="submit">Enroll user</button>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <% end %>
</div>
