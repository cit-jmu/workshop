<h1>
  <% if can? :create, Course %>
  <div class="admin-actions pull-right">
    <%= link_to 'Add new course', new_course_path, class: 'btn btn-default' %>
  </div>
  <% end %>
  Available courses
</h1>

<% if @courses.empty? %>
<p>
  There are no courses available at this time.
  <% if can? :create, Course %>
  <span class="admin-actions">
    Consider <%= link_to "adding some courses", new_course_path %>.
  </span>
  <% end %>
<p>
<% end %>

<% @courses.each do |course| %>
<div class="course-row">
  <% if can?(:update, course) || can?(:destroy, course) %>
    <div class="admin-actions pull-right">
    <% if can? :update, course %>
      <%= link_to edit_course_path(course), title: 'Edit', class: 'btn btn-default btn-sm' do %>
        <span class="glyphicon glyphicon-pencil"></span>
      <% end %>
    <% end %>
    <% if can? :destroy, course %>
      <%= link_to course, method: :delete, title: 'Delete', class: 'btn btn-default btn-sm', data: { confirm: 'Are you sure?' } do %>
        <span class="glyphicon glyphicon-trash"></span>
      <% end %>
    <% end %>
    </div>
  <% end %>

  <h3 class="title">
    <%= link_to course.title, course %>
    <% if current_user %>
      <% if current_user.enrolled?(course) %>
        <span class="label label-success">Enrolled</span>
      <% end %>
      <% if current_user.instructing?(course) %>
        <span class="label label-info">Instructing</span>
      <% end %>
    <% end %>
  </h3>
  <% if course.summary %>
    <div class="summary">
      <%= course.summary %>
    </div>
  <% end %>
</div>
<% end %>
